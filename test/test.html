<!DOCTYPE html>
<html lang="zh-TW">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>è¿½è¹¤æ¸¬è©¦é é¢</title>
        <style>
            body {
                font-family: 'Microsoft JhengHei', Arial, sans-serif;
                max-width: 800px;
                margin: 0 auto;
                padding: 20px;
                background: #f5f5f5;
            }

            .container {
                background: white;
                padding: 30px;
                border-radius: 10px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            .info-box {
                background: #e3f2fd;
                padding: 15px;
                border-radius: 5px;
                margin: 15px 0;
                border-left: 4px solid #2196f3;
            }

            .code-box {
                background: #2d3748;
                color: #e2e8f0;
                padding: 15px;
                border-radius: 5px;
                font-family: 'Courier New', monospace;
                overflow-x: auto;
                margin: 15px 0;
            }

            .btn {
                background: #2196f3;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                cursor: pointer;
                margin: 5px;
                transition: background 0.3s;
            }

            .btn:hover {
                background: #1976d2;
            }

            .status {
                padding: 10px;
                border-radius: 5px;
                margin: 10px 0;
                display: none;
            }

            .success {
                background: #d4edda;
                color: #155724;
                border: 1px solid #c3e6cb;
            }

            .error {
                background: #f8d7da;
                color: #721c24;
                border: 1px solid #f5c6cb;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <h1>ğŸ¯ ç²¾ç°¡è¿½è¹¤ç³»çµ±æ¸¬è©¦</h1>
            <div class="info-box">
                <h3>ğŸ“Š ç³»çµ±ç‰¹è‰²</h3>
                <ul>
                    <li><strong>é˜²å½é€ ï¼š</strong>åŸºæ–¼ç€è¦½å™¨æŒ‡ç´‹è­˜åˆ¥çœŸå¯¦è¨ªå®¢</li>
                    <li><strong>å»é‡æ©Ÿåˆ¶ï¼š</strong>åŒä¸€è¨ªå®¢ä¸æœƒé‡è¤‡è¨ˆç®—</li>
                    <li><strong>é »ç‡é™åˆ¶ï¼š</strong>é˜²æ­¢å¿«é€Ÿåˆ·æ–°å½é€ è¨ªå•</li>
                    <li><strong>éš±ç§ä¿è­·ï¼š</strong>IP åœ°å€ç¶“éé›œæ¹Šè™•ç†</li>
                </ul>
            </div>
            <h3>ğŸ–¼ï¸ åŸºæœ¬åœ–ç‰‡è¿½è¹¤</h3>
            <p>æœ€ç°¡å–®çš„è¿½è¹¤æ–¹å¼ï¼Œåªéœ€è¦ä¸€è¡Œ HTMLï¼š</p>
            <div class="code-box">
                &lt;img src="http://localhost:3000/track.png" width="1" height="1" style="display:none;" /&gt;
            </div>
            <div id="basic-status" class="status"></div>
            <h3>âš¡ JavaScript é€²éšè¿½è¹¤</h3>
            <p>åŒ…å«æ›´å¤šå®¢æˆ¶ç«¯è³‡è¨Šçš„è¿½è¹¤æ–¹å¼ï¼š</p>
            <div class="code-box">
                &lt;script&gt;
                (function() {
                const img = new Image();
                const params = new URLSearchParams({
                url: window.location.href,
                title: document.title,
                sw: screen.width,
                sh: screen.height,
                cd: screen.colorDepth,
                lang: navigator.language,
                tz: Intl.DateTimeFormat().resolvedOptions().timeZone,
                ct: navigator.connection ? navigator.connection.effectiveType : 'unknown'
                });
                img.src = 'http://localhost:3000/track.png?' + params.toString();
                })();
                &lt;/script&gt;
            </div>
            <button class="btn" onclick="sendAdvancedTracking()">ğŸš€ ç™¼é€é€²éšè¿½è¹¤</button>
            <div id="advanced-status" class="status"></div>
            <h3>ğŸ”„ æ¸¬è©¦åŠŸèƒ½</h3>
            <p>æ¸¬è©¦ä¸åŒçš„è¿½è¹¤å ´æ™¯ï¼š</p>
            <button class="btn" onclick="testMultipleRequests()">ğŸ“ˆ æ¸¬è©¦å¤šæ¬¡è«‹æ±‚ï¼ˆé˜²å½é€ ï¼‰</button>
            <button class="btn" onclick="testPageReload()">ğŸ”„ æ¸¬è©¦é é¢é‡è¼‰</button>
            <button class="btn" onclick="openDashboard()">ğŸ“Š æ‰“é–‹ç®¡ç†ä»‹é¢</button>
            <div id="test-status" class="status"></div>
            <h3>ğŸ“‹ æ”¶é›†çš„è³‡è¨Š</h3>
            <div class="info-box">
                <ul>
                    <li><strong>åœ°ç†ä½ç½®ï¼š</strong>åœ‹å®¶ã€åœ°å€ã€åŸå¸‚ã€ç¶“ç·¯åº¦</li>
                    <li><strong>ç€è¦½å™¨ï¼š</strong>åç¨±ã€ç‰ˆæœ¬ã€å¼•æ“</li>
                    <li><strong>ä½œæ¥­ç³»çµ±ï¼š</strong>åç¨±ã€ç‰ˆæœ¬ã€æ¶æ§‹</li>
                    <li><strong>è¨­å‚™ï¼š</strong>é¡å‹ã€è¢å¹•è§£æåº¦ã€æ™‚å€</li>
                    <li><strong>ç¶²è·¯ï¼š</strong>é€£æ¥é¡å‹ã€èªè¨€è¨­å®š</li>
                    <li><strong>é é¢ï¼š</strong>URLã€æ¨™é¡Œã€ä¾†æºé é¢</li>
                </ul>
            </div>
            <h3>ğŸ”’ éš±ç§ä¿è­·</h3>
            <div class="info-box">
                <p><strong>é‡è¦ï¼š</strong>æœ¬ç³»çµ±æ¡ç”¨ä»¥ä¸‹éš±ç§ä¿è­·æªæ–½ï¼š</p>
                <ul>
                    <li>IP åœ°å€ç¶“éé›œæ¹Šè™•ç†ï¼Œç„¡æ³•é‚„åŸ</li>
                    <li>åƒ…æ”¶é›†æŠ€è¡“æ€§è³‡è¨Šï¼Œä¸æ¶‰åŠå€‹äººéš±ç§</li>
                    <li>ä½¿ç”¨ç€è¦½å™¨æŒ‡ç´‹è€Œé Cookie</li>
                    <li>æ‰€æœ‰è³‡æ–™åƒ…ç”¨æ–¼çµ±è¨ˆåˆ†æ</li>
                </ul>
            </div>
        </div>
        <!-- åŸºæœ¬åœ–ç‰‡è¿½è¹¤ï¼ˆè‡ªå‹•åŸ·è¡Œï¼‰ -->
        <img src="http://localhost:3000/track.png?page=test&auto=true" width="1" height="1" style="display:none;"
            alt="" />
        <script>
            // é¡¯ç¤ºç‹€æ…‹è¨Šæ¯
            function showStatus(elementId, message, type = 'success') {
                const element = document.getElementById(elementId);
                element.textContent = message;
                element.className = `status ${type}`;
                element.style.display = 'block';
                setTimeout(() => {
                    element.style.display = 'none';
                }, 3000);
            }
            // é€²éšè¿½è¹¤
            function sendAdvancedTracking() {
                const img = new Image();
                const params = new URLSearchParams({
                    url: window.location.href,
                    title: document.title,
                    sw: screen.width,
                    sh: screen.height,
                    cd: screen.colorDepth,
                    lang: navigator.language,
                    tz: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    ct: navigator.connection ? navigator.connection.effectiveType : 'unknown',
                    manual: 'true'
                });
                img.onload = () => {
                    showStatus('advanced-status', 'âœ… é€²éšè¿½è¹¤è³‡è¨Šå·²ç™¼é€ï¼');
                };
                img.onerror = () => {
                    showStatus('advanced-status', 'âŒ è¿½è¹¤å¤±æ•—ï¼Œè«‹ç¢ºèªä¼ºæœå™¨é‹è¡Œç‹€æ…‹', 'error');
                };
                img.src = 'http://localhost:3000/track.png?' + params.toString();
            }
            // æ¸¬è©¦å¤šæ¬¡è«‹æ±‚ï¼ˆé©—è­‰é˜²å½é€ æ©Ÿåˆ¶ï¼‰
            function testMultipleRequests() {
                let successCount = 0;
                let totalRequests = 5;
                showStatus('test-status', 'ğŸ”„ æ­£åœ¨ç™¼é€å¤šæ¬¡è«‹æ±‚æ¸¬è©¦é˜²å½é€ æ©Ÿåˆ¶...');
                for (let i = 0; i < totalRequests; i++) {
                    setTimeout(() => {
                        const img = new Image();
                        img.onload = () => {
                            successCount++;
                            if (successCount === totalRequests) {
                                showStatus('test-status', `âœ… å·²ç™¼é€ ${totalRequests} æ¬¡è«‹æ±‚ï¼Œæª¢æŸ¥æ§åˆ¶å°æŸ¥çœ‹é˜²å½é€ æ—¥èªŒ`);
                            }
                        };
                        img.src = `http://localhost:3000/track.png?test=multiple&seq=${i}&ts=${Date.now()}`;
                    }, i * 100); // æ¯100msç™¼é€ä¸€æ¬¡
                }
            }
            // æ¸¬è©¦é é¢é‡è¼‰
            function testPageReload() {
                if (confirm('é€™å°‡é‡æ–°è¼‰å…¥é é¢ä¾†æ¸¬è©¦è¿½è¹¤åŠŸèƒ½ï¼Œç¢ºå®šè¦ç¹¼çºŒå—ï¼Ÿ')) {
                    window.location.reload();
                }
            }
            // æ‰“é–‹ç®¡ç†ä»‹é¢
            function openDashboard() {
                window.open('http://localhost:3000', '_blank');
            }
            // é é¢è¼‰å…¥å®Œæˆå¾Œçš„åˆå§‹åŒ–
            window.addEventListener('load', () => {
                showStatus('basic-status', 'âœ… åŸºæœ¬åœ–ç‰‡è¿½è¹¤å·²è‡ªå‹•åŸ·è¡Œ');
                console.log('ğŸ“Š è¿½è¹¤ç³»çµ±å·²åˆå§‹åŒ–');
                console.log('ğŸ” æ‰“é–‹ç¶²è·¯é¢æ¿å¯ä»¥çœ‹åˆ°è¿½è¹¤è«‹æ±‚');
            });
            // ç›£è½é é¢å¯è¦‹æ€§è®ŠåŒ–
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden) {
                    console.log('ğŸ“± é é¢é‡æ–°å¯è¦‹ï¼Œå¯èƒ½è§¸ç™¼æ–°çš„è¿½è¹¤');
                }
            });
        </script>
    </body>

</html>